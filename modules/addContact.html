<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">

<dom-module id="add-contact">
  <template>
    <style>
    paper-fab{
      position:absolute;
      right:10%;
      bottom:10%;
      z-index:0;
    }
    </style>
    <paper-fab icon="add"  raised on-click="_openDialog"></paper-fab>

     <paper-dialog id="dialog">
       <h2>Agregar contacto</h2>
       <paper-input id="name" label="Nombre(s)" value="{{nameVal}}"></paper-input>
       <paper-input id="lastname"  label="Apellidos" value="{{lastnameVal}}"></paper-input>
       <paper-input id="email" label="Correo" value="{{emailVal}}">
         <div slot="suffix">@email.com</div>
       </paper-input>
       <paper-input id="phone" label="Telefono" type="text" value="{{phoneVal}}"></paper-input>
       <paper-input id="address" label="Direccion" type="text" value="{{addressVal}}"></paper-input>

       <paper-textarea id="aboutme" label="Aceca de mi" value="{{aboutmeVal}}"></paper-textarea>



   	  <div class="buttons">
   	    <paper-button dialog-dismiss on-tap="_cleanInput">Cancelar</paper-button>
   	    <paper-button dialog-confirm autofocus on-tap="_saveUser">Guardar</paper-button>
   	  </div>

   	</paper-dialog>

  </template>
  <script>
  (function addcontact() {
    'use strict';

    class AddContact extends Polymer.Element{

      static get is (){return "add-contact"}

      _openDialog(event){
        this.$.dialog.open();
      }

      static get properties(){
        return{

          nameval : String,
          lastnameVal: String,
          emailVal: String,
          phoneVal: String,
          aboutmeVal: String,
          addressVal: String,

          objProfile:{
            type: Object,
            notify: true
          }

        };
      }

      _cleanInput(){
        this.$.name.value ="";
        this.$.lastname.value ="";
        this.$.email.value ="";
        this.$.phone.value ="";
        this.$.aboutme.value ="";

      }

      _saveUser(){
        let objectUser = {};

        objectUser.name = this.$.name.value;
        objectUser.lastName  = this.$.lastname.value;
        objectUser.email = this.$.email.value;
        objectUser.telephone = this.$.phone.value;
        objectUser.address = this.$.address.value;
        objectUser.bio = this.$.aboutme.value;

        this.objProfile = objectUser;

         this.dispatchEvent(new
           CustomEvent(`on-contact-changed`,{
             bubbles: true, composed: true,
             detail:this.objProfile

          }));



//        console.log(objectUser);

        console.log(this.get('objProfile' ));
        this._cleanInput();
      }

    }

    customElements.define(AddContact.is,AddContact);

  })();


    </script>
</dom-module>
